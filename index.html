<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cifrado C√©sar</title>

  <style>
    body{
      margin:0;
      font-family: system-ui, Arial;
      background:#0b1220;
      color:#eaf0ff;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .card{
      width:min(900px, 100%);
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.14);
      border-radius:16px;
      padding:18px;
      box-shadow:0 20px 60px rgba(0,0,0,.45);
    }
    h1{ margin:0 0 6px; font-size:26px; }
    p{ margin:0 0 14px; color:rgba(234,240,255,.75); font-size:14px; line-height:1.4; }

    label{ display:block; margin:10px 0 6px; font-weight:700; font-size:13px; color:rgba(234,240,255,.9); }
    textarea, input{
      width:100%;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(0,0,0,.25);
      color:#eaf0ff;
      padding:12px;
      outline:none;
    }
    textarea{ min-height:140px; resize:vertical; }
    .row{ display:flex; gap:12px; flex-wrap:wrap; align-items:end; }
    .col{ flex:1; min-width:220px; }

    .btns{ display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; }
    button{
      border:1px solid rgba(255,255,255,.18);
      border-radius:12px;
      padding:11px 14px;
      font-weight:800;
      cursor:pointer;
      color:#eaf0ff;
      background:rgba(255,255,255,.07);
    }
    button:hover{ filter:brightness(1.08); }
    .primary{ background:linear-gradient(135deg, #7c5cff, #22d3ee); border-color:rgba(124,92,255,.55); }
    .secondary{ background:rgba(34,211,238,.12); border-color:rgba(34,211,238,.35); }
    .danger{ background:rgba(255,77,109,.14); border-color:rgba(255,77,109,.35); }

    .small{ font-size:12px; color:rgba(234,240,255,.6); margin-top:8px; }
  </style>
</head>

<body>
  <div class="card">
    <h1>üîê Cifrado C√©sar</h1>
    <p>Escribe el texto, elige la llave y presiona <b>Cifrar</b> o <b>Descifrar</b>. (S√≠mbolos y n√∫meros no cambian.)</p>

    <label for="inp_text">Input (texto)</label>
    <textarea id="inp_text" placeholder="Ej: Hola mundo..."></textarea>

    <div class="row">
      <div class="col">
        <label for="inp_key">Llave (entero)</label>
        <input id="inp_key" type="number" value="3" />
        <div class="small">Tip: key se normaliza con % 26. Puedes usar negativos.</div>
      </div>

      <div class="col">
        <label>&nbsp;</label>
        <div class="btns">
          <button id="btn_encrypt" class="primary">Cifrar</button>
          <button id="btn_decrypt" class="secondary">Descifrar</button>
          <button id="btn_clear" class="danger">Limpiar</button>
        </div>
      </div>
    </div>

    <label for="out_text">Output (resultado)</label>
    <textarea id="out_text" readonly placeholder="Aqu√≠ aparece el resultado..."></textarea>
  </div>

  <script>
    const inpText = document.getElementById("inp_text");
    const inpKey  = document.getElementById("inp_key");
    const outText = document.getElementById("out_text");

    const btnEncrypt = document.getElementById("btn_encrypt");
    const btnDecrypt = document.getElementById("btn_decrypt");
    const btnClear   = document.getElementById("btn_clear");

    function normalizeKey(k){
      k = Number(k);
      if (Number.isNaN(k)) return 0;
      k = k % 26;
      if (k < 0) k += 26;
      return k;
    }

    function shiftChar(ch, key){
      const code = ch.charCodeAt(0);

      // A-Z
      if (code >= 65 && code <= 90){
        const pos = code - 65;
        return String.fromCharCode(65 + ((pos + key) % 26));
      }

      // a-z
      if (code >= 97 && code <= 122){
        const pos = code - 97;
        return String.fromCharCode(97 + ((pos + key) % 26));
      }

      return ch; // no letras
    }

    function caesarEncrypt(text, key){
      key = normalizeKey(key);
      let res = "";
      for (const ch of text) res += shiftChar(ch, key);
      return res;
    }

    function caesarDecrypt(text, key){
      key = normalizeKey(key);
      const inv = (26 - key) % 26; // invertir desplazamiento
      let res = "";
      for (const ch of text) res += shiftChar(ch, inv);
      return res;
    }

    btnEncrypt.addEventListener("click", () => {
      outText.value = caesarEncrypt(inpText.value, inpKey.value);
    });

    btnDecrypt.addEventListener("click", () => {
      outText.value = caesarDecrypt(inpText.value, inpKey.value);
    });

    btnClear.addEventListener("click", () => {
      inpText.value = "";
      outText.value = "";
      inpKey.value = 3;
    });
  </script>
</body>
</html>
